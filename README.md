# 大棚控制系统

这是一个基于ESP32和STM32的大棚智能控制系统，实现了传感器数据采集、设备控制和远程监控功能。

## 项目结构

- `esp32/` - ESP32部分代码，负责网络连接和Web界面
- `stm32/` - STM32部分代码，负责传感器数据采集和设备控制

## 功能特点

### ESP32部分
- WiFi网络连接
- Web服务器（端口80）
- 与STM32串口通信
- 实时显示传感器数据
- 远程控制设备（风扇、水泵、步进电机）

### STM32部分
- 传感器数据采集（温度、湿度、光照、CO2）
- 设备控制（风扇、加湿器、舵机、步进电机）
- 与ESP32串口通信
- OLED屏幕显示
- 按钮控制

## 硬件连接

### ESP32与STM32通信
- STM32 TX（PA9） → ESP32 GPIO16 (RX2)
- STM32 RX（PA10）→ ESP32 GPIO17 (TX2)
- 波特率：115200

### 传感器连接
- DHT11温湿度传感器
- 光照传感器
- CO2传感器

### 设备连接
- 风扇（PB1）
- 加湿器（PB0）
- 舵机（SG90）
- 步进电机

## 如何使用

1. 编译并上传ESP32代码
2. 编译并上传STM32代码
3. 确保硬件连接正确
4. 连接ESP32的WiFi（SSID: nongye, 密码: 1234567890）
5. 在浏览器中输入ESP32的IP地址访问Web界面

## 注意事项

- 确保ESP32和STM32的波特率设置一致
- 检查硬件连接，特别是串口通信的RX和TX引脚
- Web界面将显示实时传感器数据并允许控制设备

## 许可证

MIT License
